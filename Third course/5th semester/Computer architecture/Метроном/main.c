#include <LPC23xx.H> /* ???????? LPC24xx */
void delay(void) {
	unsigned int i;
	for (i=0;i<0xfffff;i++){}
}
int main (void) {
	unsigned int n;
//??????????????? ??????? ??????/??????? ????? 0 ?? ?????? GPIO
	PINSEL0 = 0x00000000;
//IODIR0 - ??????? ??????????? ????? ?????? (1 - ?????; 0 - ????)
	IODIR0 = 0x00038000; /* P0.15..17 ????????????? ?? ?????, ????????? ?? ???? */
//IOSET0 - ??????? ????????? ????? (1 - ?????????; 0 - ??? ?????????)
	IOSET0 = 0x00038000; /* ????????????? ??????? ??????? ?? ??????? (?????
??????????) */
	while (1) { /* ??????????? ???? */
//???? PORT0.10=0 ?? ?????, ????? ??????
		if (IOPIN0 & 0x400) {
			for (n = 0x00008000; n <= 0x00020000; n <<= 1) {
//??????? ???????
//IOCLR0 - ??????? ?????? ????? (1 - ?????; 0 - ??? ?????????)
				IOCLR0 = n; /* ???????? ???? */
				delay(); /* ???????? */
/* ?? ??, ??? IOSET0 - ?????????? ????????? ????? */
				*((volatile unsigned long *) 0xE0028004) = 0x00038000;
			}
		}
	else {
		for (n = 0x00020000; n >= 0x00008000; n >>= 1) {
//??????? ???????
			IOCLR0 = n; /* ???????? ???? */
			delay(); /* ???????? */
/* ?????????? ????????? ????? */
			IOSET0 = 0x00038000;
			}
		}
	}
}
